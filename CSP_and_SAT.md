# CSP
CSP是特殊的搜索问题，通常使用回溯搜索解决。

CSP中文是约束满足问题，状态有有定义域的变量 X<sub>i</sub> 定义，通常情况下，定义域会随变量而有不同，具体的状态有变量的赋值组合决定，并有约束条件。由于其标准化，可以有更高效的算法。
## 例子——地图着色问题
![image](https://github.com/yibotongxue/Learning-of-the-Introduction-of-AI/assets/161041627/d2706cfa-b2ea-46eb-b8fd-8b16003915c5)

地图着色问题可以转换为不同地区着色组合的问题，约束条件为相邻的地区不能着相同的颜色。为了表示这样的约束条件，我们将其转化为约束图，即用节点表示地区，将相邻的地区连接起来，从而只需在赋值时相连的节点不能赋相同的值。这就可以用图搜索的方法来解决了。

类似的问题还有 N-皇后 问题，数独问题等。CSP问题在现实中也有很多，比如课程分配问题、运输调度问题。
## 解决方法
首先我们考虑广搜，CSP几乎是没前进一步就会拓展不变的节点数，在变量和赋值可能比较多的时候节点拓展会很多，没办法储存。

再来考虑深搜，深搜比较好的解决了广搜的问题，但我们发现，CSP问题的解必须满足约束条件，但我们可能搜索到一半就可以发现不可能满足约束条件，这时候如果我们继续搜索，很显然是不合理的。所以我们需要一个改进的深搜——回溯搜索（Backtracking Search)

相对于深度优先搜索，我们作如下改进。

1.一次只考虑一个变量。传统的深搜每一次都会考虑所有变量的所有可能赋值，这里考虑到变量赋值的顺序不重要，我们一次只考虑一个变量。一般的我们按照一定的顺序，比如得到下一个节点的顺序，也有可能设计一个顺序，以期更快地完成求解。

2.每一步都先判断约束的满足情况。如果出现不满足的问题，就可以停止继续搜索。

回溯搜索的速度会比深度优先搜索更快，但我们还有一些通用的电子获得巨大的速度提升。一个是设计更好的变量赋值的顺序，和每一个变量先赋哪一个值，后赋哪一个值；另一个是筛选，可以根据当前的状态，经过推导提早识别最终的失败。

### 顺序
对于顺序的选择，一般的原则是选择还有最少可能的变量，对变量选择可以留下最多可能的值。

### 筛选
#### 提前检查（forward checking)
在每一次赋值后都提前排除可能矛盾的可能，缩小变量取值的定义域。
#### 约束传递
约束传递是指在提前检查的时候可能发现某一些变量只能取某一种值，因而可以根据这个再进一步做提前检查，如果还可以提前检查则再继续。
